{"ast":null,"code":"var _jsxFileName = \"/Users/danrothman/Documents/SUNGALAPP/Software/LPOGWebApp /src/components/UI/LivingPOG.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Client from './Client';\nimport { getPercentColor } from '../../lib/StyleFunctions';\nimport './LivingPOG.css';\nimport ColorKey from './ColorKey';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar logoImage = require('../../imgs/LIVINGPOG.png');\nvar SungalImage = require('../../imgs/SUNGAL.png');\nconst LivingPOG = () => {\n  _s();\n  // fetch data\n  const [planogram, setPlanogram] = useState([]);\n  const [isLoading, setIsloading] = useState(false);\n  const [error, setError] = useState(null);\n  const transformPOGData = data => {\n    /* \n    transforms data to:\n    (clientlevel)[\n                  (storeLevel)[\n                               (gondolaLevel)[\n                                              (shelfLevel)[ \n                                                           {facing},{facing}\n                                                           ]\n                                              ]\n                                ]\n                  ]\n    */\n    if (data.length === 0) return [];\n    let clientList = [],\n      storeList = [],\n      gondolaList = [],\n      shelfList = [];\n    let currStoreID = data[0][\"storeID\"];\n    let currGondolaID = data[0][\"displayfixtureID\"];\n    let currShelfID = data[0][\"shelfID\"];\n\n    // go through facings, placing them in groupings \n    // according to gondola and shelf\n    for (var facing of data) {\n      if (facing[\"shelfID\"] !== currShelfID) {\n        gondolaList.push(shelfList);\n        shelfList = [];\n      }\n      if (facing[\"displayfixtureID\"] !== currGondolaID) {\n        storeList.push(gondolaList);\n        gondolaList = [];\n      }\n      if (facing[\"storeID\"] !== currStoreID) {\n        clientList.push(storeList);\n        storeList = [];\n      }\n      currStoreID = facing[\"storeID\"];\n      currGondolaID = facing[\"displayfixtureID\"];\n      currShelfID = facing[\"shelfID\"];\n      shelfList.push(facing);\n    }\n    gondolaList.push(shelfList);\n    storeList.push(gondolaList);\n    clientList.push(storeList);\n    return clientList;\n  };\n  const fetchPlanogramsHandler = useCallback(async () => {\n    setIsloading(true);\n    setError(null);\n    try {\n      //const url = 'https://apiserver.sungalcorp.synology.me/dbGet_displaymatrixforweb?filter=storeID=7'\n      const url = 'https://apiserver.sungalcorp.synology.me/dbGet_displaymatrixforweb';\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n      const POGfacings = await response.json();\n      console.log(\"POGfacings = \", POGfacings);\n      let POGdata = transformPOGData(POGfacings);\n      setPlanogram(POGdata);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsloading(false);\n  }, []);\n  useEffect(() => {\n    fetchPlanogramsHandler();\n  }, [fetchPlanogramsHandler]);\n  let content = /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Found no planograms.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 17\n  }, this);\n  if (planogram.length > 0) {\n    content = /*#__PURE__*/_jsxDEV(Client, {\n      stores: planogram\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }, this);\n  }\n  if (error) {\n    content = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }, this);\n  }\n  if (isLoading) {\n    content = /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"logo_img\",\n        src: logoImage,\n        alt: \"LogoImg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"sungal_img\",\n        src: SungalImage,\n        alt: \"SungalImg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ColorKey, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"LivingPOG\",\n      style: {\n        height: '70vw',\n        overflow: 'auto'\n      },\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n// export default App;\n_s(LivingPOG, \"4Xajw4Rqf5WU/rQQFR8/XIo+LCw=\");\n_c = LivingPOG;\nexport default LivingPOG;\nvar _c;\n$RefreshReg$(_c, \"LivingPOG\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","Client","getPercentColor","ColorKey","logoImage","require","SungalImage","LivingPOG","planogram","setPlanogram","isLoading","setIsloading","error","setError","transformPOGData","data","length","clientList","storeList","gondolaList","shelfList","currStoreID","currGondolaID","currShelfID","facing","push","fetchPlanogramsHandler","url","response","fetch","ok","Error","POGfacings","json","console","log","POGdata","message","content","height","overflow"],"sources":["/Users/danrothman/Documents/SUNGALAPP/Software/LPOGWebApp /src/components/UI/LivingPOG.js"],"sourcesContent":["\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Client from './Client';\nimport { getPercentColor } from '../../lib/StyleFunctions';\nimport './LivingPOG.css'\nimport ColorKey from './ColorKey';\nvar logoImage = require('../../imgs/LIVINGPOG.png')\nvar SungalImage = require('../../imgs/SUNGAL.png')\n\nconst LivingPOG = () => {\n  // fetch data\n  const [planogram, setPlanogram] = useState([]);\n  const [isLoading, setIsloading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const transformPOGData = (data) => {\n    /* \n    transforms data to:\n    (clientlevel)[\n                  (storeLevel)[\n                               (gondolaLevel)[\n                                              (shelfLevel)[ \n                                                           {facing},{facing}\n                                                           ]\n                                              ]\n                                ]\n                  ]\n    */\n    if (data.length === 0) return [];\n\n    let clientList = [], storeList = [], gondolaList = [], shelfList = []\n    let currStoreID = data[0][\"storeID\"]\n    let currGondolaID = data[0][\"displayfixtureID\"]\n    let currShelfID = data[0][\"shelfID\"]\n\n    // go through facings, placing them in groupings \n    // according to gondola and shelf\n    for (var facing of data) {\n      if (facing[\"shelfID\"] !== currShelfID) {\n        gondolaList.push(shelfList);\n        shelfList = [];\n      }\n\n      if (facing[\"displayfixtureID\"] !== currGondolaID) {\n        storeList.push(gondolaList);\n        gondolaList = [];\n      }\n\n      if (facing[\"storeID\"] !== currStoreID) {\n        clientList.push(storeList);\n        storeList = [];\n      }\n      currStoreID = facing[\"storeID\"]\n      currGondolaID = facing[\"displayfixtureID\"]\n      currShelfID = facing[\"shelfID\"]\n      shelfList.push(facing)\n    }\n\n    gondolaList.push(shelfList)\n    storeList.push(gondolaList)\n    clientList.push(storeList)\n    return clientList\n  }\n\n  const fetchPlanogramsHandler = useCallback(async () => {\n    setIsloading(true);\n    setError(null);\n    try {\n      //const url = 'https://apiserver.sungalcorp.synology.me/dbGet_displaymatrixforweb?filter=storeID=7'\n      const url = 'https://apiserver.sungalcorp.synology.me/dbGet_displaymatrixforweb'\n      const response = await fetch(url);\n\n      if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n      const POGfacings = await response.json();\n      console.log(\"POGfacings = \", POGfacings)\n      let POGdata = transformPOGData(POGfacings)\n      setPlanogram(POGdata);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsloading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchPlanogramsHandler();\n  }, [fetchPlanogramsHandler]);\n\n  let content = <p>Found no planograms.</p>;\n\n  if (planogram.length > 0) {\n    content = <Client stores={planogram} />;\n  }\n\n  if (error) {\n    content = <p>{error}</p>;\n  }\n\n  if (isLoading) {\n    content = <p>Loading...</p>;\n  }\n  return (\n    <div>\n      <div>\n          <img  \n                className=\"logo_img\" \n                src={logoImage} \n                alt = 'LogoImg'\n          /> \n          <img  \n                className=\"sungal_img\" \n                src={SungalImage} \n                alt = 'SungalImg'\n          /> \n          <ColorKey/>\n          {/* <div className='percentage-notice-section'>\n              \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('10'),marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw'}}>{'0%-20%'}</span>\n              </div> \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('30'), marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw' }}>{'20%-40%'}</span>\n              </div> \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('50'), marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw' }}>{'40%-60%'}</span>\n              </div> \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('70'), marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw' }}>{'60%-80%'}</span>\n              </div> \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('85'), marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw' }}>{'80%-90%'}</span>\n              </div> \n              <div className=\"percentage-tag-notice\" style={{backgroundColor: getPercentColor('99'), marginRight: '2.5vw'}}>\n                <span style={{ marginLeft: '2vw' }}>{'90%-100%'}</span>\n              </div> \n          </div> */}\n      </div>\n        <div className='LivingPOG' style={{height:'70vw',overflow:'auto'}}>{content}</div>\n        {/* {content} */}\n     \n    </div>\n  )\n\n}\n\n// export default App;\nexport default LivingPOG;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}